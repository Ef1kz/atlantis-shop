<!-- templates/cart/checkout.html -->
{% extends 'base.html' %}

{% block title %}Оформление заказа — ATLANTIS{% endblock %}

{% block content %}
<h1 class="gold text-center mb-4">ОФОРМЛЕНИЕ ЗАКАЗА</h1>

<div class="row">
    <div class="col-md-8">
        <form method="post">
            {% csrf_token %}
            <div class="mb-3">
                <label class="form-label">Адрес доставки</label>
                <input type="text" name="delivery_address" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Телефон</label>
                <input type="tel" name="phone" class="form-control" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" name="email" class="form-control" value="{% if user.is_authenticated %}{{ user.email }}{% endif %}" required>
            </div>

            <h4 class="gold mt-5">Товары в заказе</h4>
            {% for item in cart_items %}
            <div class="card bg-dark text-white mb-3">
                <div class="card-body">
                    <h5 class="gold">{{ item.name }}</h5>
                    <p>Количество: {{ item.quantity }} × {{ item.price }} ₽ = {{ item.subtotal|floatformat:2 }} ₽</p>
                </div>
            </div>
            {% endfor %}

            <button type="submit" class="btn btn-action w-100">Подтвердить заказ</button>
        </form>
    </div>
    <div class="col-md-4">
        <div class="card bg-gold text-dark p-4">
            <h3>Итого: {{ total|floatformat:2 }} ₽</h3>
        </div>
    </div>
</div>
{% endblock %}